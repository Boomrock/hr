# üóÑÔ∏è **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –≤—Å–µ–≥–æ –æ–±—â–µ–Ω–∏—è –≤ —á–∞—Ç–µ**

## ‚úÖ **–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ**

### **1. üìä –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö (SQLite)**

#### **–¢–∞–±–ª–∏—Ü—ã:**
- **`chat_sessions`** - –°–µ—Å—Å–∏–∏ —á–∞—Ç–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- **`chat_messages`** - –í—Å–µ —Å–æ–æ–±—â–µ–Ω–∏—è —á–∞—Ç–∞
- **`candidate_profiles`** - –ü—Ä–æ—Ñ–∏–ª–∏ –∫–∞–Ω–¥–∏–¥–∞—Ç–æ–≤ —Å –æ—Ü–µ–Ω–∫–∞–º–∏
- **`knowledge_base`** - –ë–∞–∑–∞ –∑–Ω–∞–Ω–∏–π –¥–ª—è RAG
- **`users`** - –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è—Ö

#### **–û—Å–Ω–æ–≤–Ω—ã–µ –ø–æ–ª—è:**
```sql
chat_sessions: id, userId, userName, userEmail, startTime, endTime, status, sessionType, metadata
chat_messages: id, sessionId, role, content, timestamp, messageType, confidence, metadata  
candidate_profiles: id, sessionId, userId, fullName, email, overallScore, technicalSkills, softSkills, summary, recommendations, aiAnalysis, individualDevelopmentPlan
```

---

### **2. üõ†Ô∏è –°–µ—Ä–≤–∏—Å—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ë–î**

#### **ChatDatabase (`src/lib/database.ts`)**:
- **–°–æ–∑–¥–∞–Ω–∏–µ/—É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–∞–±–ª–∏—Ü–∞–º–∏** —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–µ–π
- **CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏** –¥–ª—è –≤—Å–µ—Ö —Å—É—â–Ω–æ—Å—Ç–µ–π 
- **–ò–Ω–¥–µ–∫—Å—ã** –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–∏—Å–∫–∞
- **–ê–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏–µ –º–µ—Ç–æ–¥—ã** –¥–ª—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
- **–û—á–∏—Å—Ç–∫–∞ —Å—Ç–∞—Ä—ã—Ö –¥–∞–Ω–Ω—ã—Ö** (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è)

#### **ChatService (`src/services/chatService.ts`)**:
- **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Å—Å–∏—è–º–∏** —á–∞—Ç–∞
- **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π** –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- **–†–∞–±–æ—Ç–∞ —Å –ø—Ä–æ—Ñ–∏–ª—è–º–∏** –∫–∞–Ω–¥–∏–¥–∞—Ç–æ–≤
- **–ò—Å—Ç–æ—Ä–∏—è —á–∞—Ç–æ–≤** –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- **–≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö** –≤ JSON
- **–ü–æ–∏—Å–∫ –ø–æ —Å–æ–æ–±—â–µ–Ω–∏—è–º**

---

### **3. üîó –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å RAG –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º**

#### **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ:**
- ‚úÖ **–ö–∞–∂–¥–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ** —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ –ë–î
- ‚úÖ **–ü—Ä–æ—Ñ–∏–ª–∏ –∫–∞–Ω–¥–∏–¥–∞—Ç–æ–≤** –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- ‚úÖ **–û—Ü–µ–Ω–∫–∏ –Ω–∞–≤—ã–∫–æ–≤** —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è —Å –∫–∞–∂–¥—ã–º –æ—Ç–≤–µ—Ç–æ–º
- ‚úÖ **–°–µ—Å—Å–∏–∏ —á–∞—Ç–∞** –æ—Ç—Å–ª–µ–∂–∏–≤–∞—é—Ç—Å—è –æ—Ç –Ω–∞—á–∞–ª–∞ –¥–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è

#### **–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è:**
- ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ** –∞–∫—Ç–∏–≤–Ω—ã—Ö —á–∞—Ç–æ–≤ –ø—Ä–∏ –≤—Ö–æ–¥–µ
- ‚úÖ **–ó–∞–≥—Ä—É–∑–∫–∞ –∏—Å—Ç–æ—Ä–∏–∏ —Å–æ–æ–±—â–µ–Ω–∏–π** –∏–∑ –ë–î
- ‚úÖ **–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª–µ–π** –∫–∞–Ω–¥–∏–¥–∞—Ç–æ–≤

---

### **4. üì± –ù–æ–≤—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ**

#### **–ö–Ω–æ–ø–∫–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**
- üìú **"–ò—Å—Ç–æ—Ä–∏—è"** - –ø—Ä–æ—Å–º–æ—Ç—Ä –≤—Å–µ—Ö –ø—Ä–æ—à–ª—ã—Ö —á–∞—Ç–æ–≤
- üíæ **"–≠–∫—Å–ø–æ—Ä—Ç"** - —Å–∫–∞—á–∏–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö —á–∞—Ç–∞ –≤ JSON
- üÜï **"–ù–∞—á–∞—Ç—å –Ω–æ–≤—ã–π —á–∞—Ç"** - —Å–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–π —Å–µ—Å—Å–∏–∏

#### **–ü–∞–Ω–µ–ª—å –∏—Å—Ç–æ—Ä–∏–∏:**
- **–°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —á–∞—Ç–æ–≤** –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å –¥–∞—Ç–∞–º–∏
- **–°—Ç–∞—Ç—É—Å —Å–µ—Å—Å–∏–π** (–∞–∫—Ç–∏–≤–Ω–∞—è/–∑–∞–≤–µ—Ä—à–µ–Ω–Ω–∞—è)
- **–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–æ–æ–±—â–µ–Ω–∏–π** –∏ –±–∞–ª–ª –ø—Ä–æ—Ñ–∏–ª—è
- **–ë—ã—Å—Ç—Ä–æ–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ** –º–µ–∂–¥—É —á–∞—Ç–∞–º–∏

#### **–£–ª—É—á—à–µ–Ω–Ω–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ:**
- **–ü–∞—Ä—Å–∏–Ω–≥ JSON** –¥–ª—è –Ω–∞–≤—ã–∫–æ–≤ –∏–∑ –ë–î
- **–ü—Ä–æ–≥—Ä–µ—Å—Å –æ—Ü–µ–Ω–æ–∫** –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ** –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞

---

## üéØ **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö**

### **–ü–æ—Ç–æ–∫ –¥–∞–Ω–Ω—ã—Ö:**
```
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å ‚Üí RAG –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å ‚Üí ChatService ‚Üí Database ‚Üí –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ
     ‚Üë                                                      ‚Üì
–ó–∞–≥—Ä—É–∑–∫–∞ –∏—Å—Ç–æ—Ä–∏–∏ ‚Üê RAG –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å ‚Üê ChatService ‚Üê –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö
```

### **–¢–∏–ø—ã —Å–µ—Å—Å–∏–π:**
- **`rag-chat`** - –û—Å–Ω–æ–≤–Ω–æ–π HR —á–∞—Ç —Å RAG
- **`enhanced-interview`** - –†–∞—Å—à–∏—Ä–µ–Ω–Ω–æ–µ –∏–Ω—Ç–µ—Ä–≤—å—é
- **`assessment-360`** - 360¬∞ –æ—Ü–µ–Ω–∫–∞
- **`mbti-chat`** - MBTI —á–∞—Ç-—Ç–µ—Å—Ç

---

## üìà **–ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞**

### **–î–æ—Å—Ç—É–ø–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏:**
- **–û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–µ—Å—Å–∏–π** –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- **–û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–æ–æ–±—â–µ–Ω–∏–π**
- **–°—Ä–µ–¥–Ω—è—è –ø—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å** —Å–µ—Å—Å–∏–π
- **–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—ã—Ö –ø—Ä–æ—Ñ–∏–ª–µ–π**

### **–§—É–Ω–∫—Ü–∏–∏ –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤:**
- **–ü—Ä–æ—Å–º–æ—Ç—Ä –≤—Å–µ—Ö –ø—Ä–æ—Ñ–∏–ª–µ–π** –∫–∞–Ω–¥–∏–¥–∞—Ç–æ–≤
- **–≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö** –≤ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–∞—Ö
- **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º**
- **–û—á–∏—Å—Ç–∫–∞ —Å—Ç–∞—Ä—ã—Ö –¥–∞–Ω–Ω—ã—Ö**

---

## üîÑ **–ñ–∏–∑–Ω–µ–Ω–Ω—ã–π —Ü–∏–∫–ª —á–∞—Ç–∞**

### **1. –°–æ–∑–¥–∞–Ω–∏–µ —Å–µ—Å—Å–∏–∏:**
```typescript
chatService.createChatSession({
  user: currentUser,
  sessionType: 'rag-chat',
  metadata: { difficulty: 'middle' }
})
```

### **2. –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π:**
```typescript
chatService.addMessage(sessionId, {
  role: 'user',
  content: '–ú–æ–π –æ—Ç–≤–µ—Ç...',
  messageType: 'text'
})
```

### **3. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è:**
```typescript
chatService.saveCandidateProfile(sessionId, {
  overallScore: 85,
  technicalSkills: JSON.stringify(skills),
  summary: '–ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ...'
})
```

### **4. –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Å–µ—Å—Å–∏–∏:**
```typescript
chatService.endSession(sessionId)
```

---

## üíæ **–£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –ø–∞–∫–µ—Ç—ã**

```bash
npm install better-sqlite3 @types/better-sqlite3
```

### **–°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤:**
```
/data/hr-chat.db          # SQLite –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
/src/lib/database.ts      # –°—Ö–µ–º–∞ –∏ –º–µ—Ç–æ–¥—ã –ë–î
/src/services/chatService.ts  # –°–µ—Ä–≤–∏—Å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —á–∞—Ç–∞–º–∏
/src/components/RAGChatInterface.tsx  # –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
```

---

## üöÄ **–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –Ω–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã**

### **–î–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:**
- ‚úÖ **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞** –º–µ–∂–¥—É —Å–µ—Å—Å–∏—è–º–∏
- ‚úÖ **–ò—Å—Ç–æ—Ä–∏—è –≤—Å–µ—Ö —Å–æ–±–µ—Å–µ–¥–æ–≤–∞–Ω–∏–π**
- ‚úÖ **–≠–∫—Å–ø–æ—Ä—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤**
- ‚úÖ **–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –Ω–µ–∑–∞–≤–µ—Ä—à–µ–Ω–Ω—ã—Ö —á–∞—Ç–æ–≤**

### **–î–ª—è —Å–∏—Å—Ç–µ–º—ã:**
- ‚úÖ **–ù–∞–¥–µ–∂–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ** –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ **–ë—ã—Å—Ç—Ä—ã–π –ø–æ–∏—Å–∫** –ø–æ –∏—Å—Ç–æ—Ä–∏–∏
- ‚úÖ **–ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è**
- ‚úÖ **–†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ** –∏ –º–∏–≥—Ä–∞—Ü–∏—è

### **–î–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤:**
- ‚úÖ **–ü–æ–ª–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞** –ø–æ –≤—Å–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º
- ‚úÖ **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã–º–∏**
- ‚úÖ **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏**
- ‚úÖ **–≠–∫—Å–ø–æ—Ä—Ç –æ—Ç—á–µ—Ç–æ–≤**

---

## üéâ **–°—Ç–∞—Ç—É—Å: –ü–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –∏ –≥–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!**

–í—Å–µ –æ–±—â–µ–Ω–∏–µ –≤ —á–∞—Ç–µ —Ç–µ–ø–µ—Ä—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö SQLite —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –∏—Å—Ç–æ—Ä–∏–∏, —ç–∫—Å–ø–æ—Ä—Ç–∞ –¥–∞–Ω–Ω—ã—Ö –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∏. –°–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–æ–∑—Ä–∞—á–Ω–æ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –Ω–∞–¥–µ–∂–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤—Å–µ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Å–æ–±–µ—Å–µ–¥–æ–≤–∞–Ω–∏—è—Ö.
